"use strict";

var __db__ = require('__driver/db'),
	__async__ = require('__driver/myasync').async,
	__notifications__ = require("__driver/notifications"),
	__cache__ = require("__driver/cache");

/*
	actualiza uno de los tipos de preguntas (dato maestro)
*/

module.exports = {
	exec: function (parms) {
		var name = parms.data.name;
		var code = parms.data.code;
		var description = parms.data.description;
		var idresource = parms.url_data[0];
		var set = {}
		set[("name."+(parms.request.session.user_data.lng))] = name;
		set["code"] = code;
		set[("description."+(parms.request.session.user_data.lng))] = description;
		parms.db.update({
			collection : "master_survey_field_type",
			condition : {
				_id : require('mongodb').ObjectID(idresource)
			},
			set : set,
			callback : function(x, y){
				if(x){
					parms.response.writeHead(400, {"Content-Type": "application/json"});
					parms.response.end("{}");
				}else{
					parms.response.writeHead(200, {"Content-Type": "application/json"});
					parms.response.end("{}");
				}
			}
		});
	}
}